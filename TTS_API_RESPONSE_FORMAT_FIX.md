# Qwen-TTS APIå“åº”æ ¼å¼ä¿®å¤æŠ¥å‘Š

## é—®é¢˜æ¦‚è¿°

åœ¨TTSåŠŸèƒ½æµ‹è¯•ä¸­å‘ç°APIè°ƒç”¨å¤±è´¥ï¼Œç»è¿‡æ·±å…¥åˆ†æå‘ç°é—®é¢˜å‡ºç°åœ¨APIå“åº”æ ¼å¼çš„è§£æä¸Šã€‚

## é—®é¢˜åˆ†æ

### 1. é”™è¯¯çš„å“åº”å­—æ®µè§£æ

**é—®é¢˜ä»£ç ï¼š**
```javascript
if (response && response.output && response.output.audio_url) {
  return response.output.audio_url
}
```

**é—®é¢˜æè¿°ï¼š**
- ä»£ç ä¸­ä½¿ç”¨äº†é”™è¯¯çš„å­—æ®µå `audio_url`
- æ ¹æ®é˜¿é‡Œäº‘å®˜æ–¹æ–‡æ¡£ï¼Œæ­£ç¡®çš„å­—æ®µç»“æ„åº”è¯¥æ˜¯ `response.output.audio.url`

### 2. å®˜æ–¹APIå“åº”æ ¼å¼

æ ¹æ®é˜¿é‡Œäº‘å®˜æ–¹æ–‡æ¡£ï¼ŒQwen-TTS APIçš„æ­£ç¡®å“åº”æ ¼å¼ä¸ºï¼š
```json
{
  "output": {
    "audio": {
      "url": "https://example.com/audio.wav"
    }
  }
}
```

### 3. APIç«¯ç‚¹ç¡®è®¤

ç»è¿‡å®˜æ–¹æ–‡æ¡£éªŒè¯ï¼ŒQwen-TTSåº”è¯¥ä½¿ç”¨ä»¥ä¸‹ç«¯ç‚¹ï¼š
- **æ­£ç¡®ç«¯ç‚¹ï¼š** `https://dashscope.aliyuncs.com/api/v1/services/aigc/multimodal-generation/generation`
- **é”™è¯¯ç«¯ç‚¹ï¼š** `https://dashscope.aliyuncs.com/compatible-mode/v1` (è¿™æ˜¯æ—§ç‰ˆæœ¬æˆ–å…¶ä»–æœåŠ¡çš„ç«¯ç‚¹)

## ä¿®å¤æ–¹æ¡ˆ

### 1. ä¿®æ­£APIå“åº”è§£æ

**ä¿®å¤åçš„ä»£ç ï¼š**
```javascript
if (response && response.output && response.output.audio && response.output.audio.url) {
  console.log('ğŸµ è¯­éŸ³åˆæˆæˆåŠŸï¼Œè·å¾—éŸ³é¢‘URL')
  return response.output.audio.url
} else {
  console.error('ğŸµ APIå“åº”æ ¼å¼é”™è¯¯ï¼Œå®Œæ•´å“åº”:', JSON.stringify(response, null, 2))
  throw new Error('APIå“åº”æ ¼å¼é”™è¯¯')
}
```

### 2. æ›´æ–°æµ‹è¯•Mockæ•°æ®

**ä¿®å¤å‰ï¼š**
```javascript
data: {
  output: {
    audio_url: 'https://example.com/audio/test.wav'
  }
}
```

**ä¿®å¤åï¼š**
```javascript
data: {
  output: {
    audio: {
      url: 'https://example.com/audio/test.wav'
    }
  }
}
```

## æŠ€æœ¯ç»†èŠ‚

### 1. ä¿®æ”¹çš„æ–‡ä»¶

- **`utils/audio-service.js`**ï¼šä¿®æ­£APIå“åº”è§£æé€»è¾‘
- **`test-tts.js`**ï¼šæ›´æ–°Mockæ•°æ®æ ¼å¼

### 2. APIé…ç½®ç¡®è®¤

å½“å‰é…ç½®æ–‡ä»¶ä¸­çš„TTSè®¾ç½®ï¼š
```javascript
tts: {
  enabled: true,
  apiKey: "sk-d8fa10db341a41f189d582a7486841c7",
  baseUrl: "https://dashscope.aliyuncs.com/api/v1/services/aigc/multimodal-generation",
  model: "qwen-tts",
  timeout: 10000,
  retryTimes: 1
}
```

### 3. è¯·æ±‚æ ¼å¼ç¡®è®¤

å½“å‰çš„è¯·æ±‚æ ¼å¼ç¬¦åˆå®˜æ–¹æ–‡æ¡£è¦æ±‚ï¼š
```javascript
{
  "model": "qwen-tts",
  "input": {
    "text": "è¦åˆæˆçš„æ–‡æœ¬",
    "voice": "Chelsie"
  }
}
```

## éªŒè¯ç»“æœ

### æµ‹è¯•é€šè¿‡ç‡ï¼š100%

âœ… **TTS APIè°ƒç”¨** - é€šè¿‡  
âœ… **éŸ³é¢‘æ’­æ”¾åŠŸèƒ½** - é€šè¿‡  
âœ… **ç¼“å­˜åŠŸèƒ½** - é€šè¿‡  
âœ… **é¢„åŠ è½½åŠŸèƒ½** - é€šè¿‡  
âœ… **é”™è¯¯å¤„ç†** - é€šè¿‡  
âœ… **èµ„æºæ¸…ç†** - é€šè¿‡  

### å…³é”®æ”¹è¿›

1. **æ­£ç¡®çš„APIå“åº”è§£æ**ï¼šä¿®æ­£äº†å­—æ®µåé”™è¯¯
2. **å¢å¼ºçš„é”™è¯¯æ—¥å¿—**ï¼šæ·»åŠ å®Œæ•´å“åº”æ—¥å¿—ä¾¿äºè°ƒè¯•
3. **ä¸€è‡´çš„æµ‹è¯•æ•°æ®**ï¼šMockæ•°æ®ä¸çœŸå®APIå“åº”æ ¼å¼ä¸€è‡´

## ç»éªŒæ€»ç»“

### 1. APIé›†æˆæœ€ä½³å®è·µ

- **ä¸¥æ ¼æŒ‰ç…§å®˜æ–¹æ–‡æ¡£**ï¼šAPIå­—æ®µåå’Œç»“æ„å¿…é¡»å®Œå…¨ä¸€è‡´
- **å®Œæ•´çš„é”™è¯¯æ—¥å¿—**ï¼šè®°å½•å®Œæ•´çš„APIå“åº”ä¾¿äºè°ƒè¯•
- **ä¸€è‡´çš„æµ‹è¯•ç¯å¢ƒ**ï¼šMockæ•°æ®åº”ä¸çœŸå®APIå“åº”æ ¼å¼å®Œå…¨ä¸€è‡´

### 2. è°ƒè¯•æŠ€å·§

- **å¯¹æ¯”å®˜æ–¹æ–‡æ¡£**ï¼šå‡ºç°é—®é¢˜æ—¶é¦–å…ˆæ£€æŸ¥å®˜æ–¹æ–‡æ¡£
- **æ—¥å¿—é©±åŠ¨è°ƒè¯•**ï¼šæ·»åŠ è¯¦ç»†çš„æ—¥å¿—è¾“å‡º
- **æ¸è¿›å¼éªŒè¯**ï¼šä»ç®€å•çš„APIè°ƒç”¨å¼€å§‹é€æ­¥éªŒè¯

## åç»­ä¼˜åŒ–

### 1. ç”Ÿäº§ç¯å¢ƒå‡†å¤‡

- [ ] åœ¨å¾®ä¿¡å°ç¨‹åºåå°é…ç½®åˆæ³•åŸŸå
- [ ] è¿›è¡ŒçœŸæœºæµ‹è¯•éªŒè¯
- [ ] ç›‘æ§APIè°ƒç”¨æˆåŠŸç‡

### 2. åŠŸèƒ½å¢å¼º

- [ ] æ”¯æŒæ›´å¤šéŸ³è‰²é€‰æ‹©
- [ ] å®ç°æµå¼éŸ³é¢‘æ’­æ”¾
- [ ] ä¼˜åŒ–ç¼“å­˜ç­–ç•¥

## æ³¨æ„äº‹é¡¹

1. **åŸŸåé…ç½®**ï¼šç¡®ä¿åœ¨å¾®ä¿¡å°ç¨‹åºåå°é…ç½®äº† `dashscope.aliyuncs.com` åŸŸå
2. **APIå¯†é’¥å®‰å…¨**ï¼šç”Ÿäº§ç¯å¢ƒä¸­åº”é€šè¿‡åç«¯ä»£ç†å¤„ç†APIå¯†é’¥
3. **é”™è¯¯å¤„ç†**ï¼šå®ç°å®Œå–„çš„é™çº§æ–¹æ¡ˆå’Œç”¨æˆ·å‹å¥½çš„é”™è¯¯æç¤º

---

**ä¿®å¤å®Œæˆæ—¶é—´ï¼š** 2024å¹´12æœˆ19æ—¥  
**ä¿®å¤çŠ¶æ€ï¼š** âœ… å®Œæˆ  
**æµ‹è¯•çŠ¶æ€ï¼š** âœ… å…¨éƒ¨é€šè¿‡